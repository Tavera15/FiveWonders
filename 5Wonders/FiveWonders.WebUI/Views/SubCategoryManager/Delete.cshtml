@model FiveWonders.core.Models.SubCategory

@{
    string imgName = Model.isEventOrTheme && !String.IsNullOrWhiteSpace(Model.mImageUrl)
        ? Url.Content("~/Content/SubcategoryImages/" + Model.mImageUrl)
        : "";
}

<div id="products-page">
    <div class="pp-title-container"
         style="background-image: url(@imgName);">
        <div id="bannerImg-cover-input" style="background-color: rgba(0,0,0, @Model.mImgShaderAmount);" class="pp-title-dark-layer">
            <h2 style="color: @Model.bannerTextColor" class="pp-title-text">@Model.mSubCategoryName</h2>
        </div>
    </div>

    <h3>Are you sure you want to delete this?</h3>
    <div>
        <hr />

        @if (ViewBag.productsWithSub.Length != 0)
        {
            <h3>Can't delete subcategory <strong>@Html.DisplayFor(model => model.mSubCategoryName)</strong></h3>
            <h2>Update the Subcategory field for the following products:</h2>

            <table>
                @foreach (var product in ViewBag.productsWithSub)
                {
                    <tr>
                        <td>
                            <a href="/ProductManager/Edit/@product.mID">@product.mName</a>
                        </td>
                    </tr>
                }
            </table>
        }

        <div class="form-actions no-color">

            @if (ViewBag.productsWithSub.Length == 0)
            {
                using (Html.BeginForm())
                {
                    @Html.AntiForgeryToken()

                    <input type="submit" value="Delete" class="btn btn-default" />
                }
            }

            @Html.ActionLink("Back to List", "Index")
        </div>
    </div>
</div>

@section Pagecss
{
    <link href="~/Content/5WondersCss/ProductList.css"
          rel="stylesheet" type="text/css" />
}